{
  "meta": {
    "project": "Salon Manager Backend API",
    "date": "2025-12-18",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "The Salon Manager Backend API provides comprehensive management capabilities for salon operations, including authentication, shop and designer profiles, menu management, reservation bookings, customer management, and sales reporting. It enables a seamless integration of backend services essential for operating and managing a salon efficiently.",
  "core_goals": [
    "Provide secure and reliable authentication and session management.",
    "Enable flexible and efficient management of shops, designers, menus, and customers.",
    "Streamline reservation processing including creation, update, completion, and cancellation.",
    "Support comprehensive sales reporting to monitor business performance.",
    "Ensure data consistency and validation throughout the system.",
    "Facilitate easy-to-use APIs for frontend integration and administrative tasks."
  ],
  "key_features": [
    "Authentication API supporting login, logout, and token refresh with secure JWT management.",
    "Menu management with full CRUD capabilities and category handling to organize salon services.",
    "Reservation system with state management (pending, confirmed, completed, cancelled, no-show) and calendar integration.",
    "Designer and shop profile APIs for managing staff information and shop details.",
    "Customer management including search, detail view, and memo creation for account histories and notes.",
    "Sales reporting by daily aggregation with breakdowns by menu and payment method.",
    "Support for operational settings such as business hours and designer availability.",
    "Comprehensive validation and error handling on all APIs to ensure data integrity."
  ],
  "user_flow_summary": [
    "User logs in with email and password and receives authentication tokens (access and refresh).",
    "User can log out to clear session and tokens.",
    "User views and manages shop, designer, and menu information.",
    "User creates a reservation by searching customers and selecting menu, designer, date, and time.",
    "User updates reservation status, edits details, or deletes reservations as needed.",
    "User completes reservation with payment recording.",
    "Administrator manages customer memos and views visit histories.",
    "Sales data is retrieved and reviewed via reports on daily and monthly performance."
  ],
  "validation_criteria": [
    "Authentication tokens are correctly issued, refreshed, and invalidated on logout.",
    "APIs return appropriate status codes and error messages for invalid or missing data.",
    "Reservation times outside business hours are blocked or warned appropriately.",
    "Overlapping reservations for the same designer/time slot are detected and prevented.",
    "Menu CRUD operations reflect accurate updates in the system immediately.",
    "Designer status changes disable or enable reservation creation accordingly.",
    "Sales reports match payment transaction data exactly.",
    "All user input follows defined validation schemas to prevent data corruption.",
    "Critical functionalities are manually tested following the provided comprehensive test plan checklist."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "NestJS",
      "Prisma",
      "MySQL",
      "Passport",
      "JWT"
    ],
    "features": [
      {
        "name": "Auth API",
        "description": "Authentication management including login, logout, and token refresh.",
        "files": [
          "backend/src/auth/auth.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/auth/login": {
              "post": {
                "summary": "User Login",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/auth/logout": {
              "post": {
                "summary": "User Logout"
              }
            },
            "/auth/refresh": {
              "post": {
                "summary": "Refresh Access Token"
              }
            }
          }
        }
      },
      {
        "name": "Menus API",
        "description": "Menu management including retrieving, creating, updating, and deleting menus.",
        "files": [
          "backend/src/menus/menus.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/menus": {
              "get": {
                "summary": "Get all menus for a shop"
              },
              "post": {
                "summary": "Create a new menu"
              }
            },
            "/menus/{id}": {
              "patch": {
                "summary": "Update a menu"
              },
              "delete": {
                "summary": "Delete a menu"
              }
            }
          }
        }
      },
      {
        "name": "Reservations API",
        "description": "Reservation management including Listing, Creating, Updating, Completing, and Deleting.",
        "files": [
          "backend/src/reservations/reservations.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/reservations": {
              "get": {
                "summary": "Get all reservations with filters"
              },
              "post": {
                "summary": "Create a reservation"
              }
            },
            "/reservations/{id}": {
              "get": {
                "summary": "Get one reservation"
              },
              "patch": {
                "summary": "Update reservation status or details"
              },
              "delete": {
                "summary": "Delete reservation"
              }
            },
            "/reservations/{id}/complete": {
              "post": {
                "summary": "Complete a reservation with payment"
              }
            }
          }
        }
      },
      {
        "name": "Designers API",
        "description": "Designer management APIs.",
        "files": [
          "backend/src/designers/designers.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/designers": {
              "get": {
                "summary": "Get all designers"
              },
              "post": {
                "summary": "Create a designer"
              }
            },
            "/designers/{id}": {
              "patch": {
                "summary": "Update designer info"
              }
            }
          }
        }
      },
      {
        "name": "Shops API",
        "description": "Shop management APIs.",
        "files": [
          "backend/src/shops/shops.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/shops/{id}": {
              "get": {
                "summary": "Get shop info"
              },
              "patch": {
                "summary": "Update shop info"
              }
            }
          }
        }
      },
      {
        "name": "Users API",
        "description": "User management APIs.",
        "files": [
          "backend/src/users/users.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/users": {
              "get": {
                "summary": "Search users"
              },
              "post": {
                "summary": "Create user"
              }
            }
          }
        }
      },
      {
        "name": "Customers API",
        "description": "Customer specific APIs.",
        "files": [
          "backend/src/customers/customers.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/customers": {
              "get": {
                "summary": "Search customers"
              }
            },
            "/customers/{id}": {
              "get": {
                "summary": "Get customer details"
              }
            },
            "/customers/{id}/memos": {
              "post": {
                "summary": "Create memo for customer"
              }
            }
          }
        }
      },
      {
        "name": "Sales API",
        "description": "Sales reporting APIs.",
        "files": [
          "backend/src/sales/sales.controller.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/sales/daily": {
              "get": {
                "summary": "Get daily sales report"
              }
            }
          }
        }
      }
    ]
  }
}
